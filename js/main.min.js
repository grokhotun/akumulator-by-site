const yandexMaps=()=>{ymaps.ready(()=>{new ymaps.Map("ya-map-contacts",{center:[53.842377,27.559467],zoom:16}),new ymaps.Map("ya-map-contacts-full",{center:[53.842377,27.559467],zoom:16})})},imgToBackground=()=>{document.querySelectorAll(".ibg").forEach(e=>{e.querySelector("img")&&(e.style.backgroundImage="url("+e.querySelector("img").getAttribute("src")+")",e.querySelector("img").style.display="none")})},burgerMenu=e=>{const t=document.querySelector(".burger"),r=document.querySelector("."+e);r&&t.addEventListener("click",()=>{t.classList.toggle("is-active"),r.classList.toggle("is-shown"),document.querySelector("body").classList.toggle("lock")})},popups=()=>{const e=document.querySelectorAll(".popup"),t=document.querySelectorAll(".js-popup-open"),r=document.querySelectorAll(".js-popup-close"),n=document.querySelectorAll(".lock-padding"),o=document.querySelector("body");let s=null,c=null,l=!1,i=!1;function a(e){if(!l){l=!0;const t=document.querySelector(".popup.is-opened");t&&u(t,!1),e.scrollTo(0,0),e.classList.add("is-opened"),s=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px",n.length>0&&n.forEach(e=>{e.style.paddingRight=s}),o.style.paddingRight=s,o.classList.add("lock")}}function u(e,t=!0){l||(l=!0,c=document.querySelector(".burger.is-active"),e.classList.remove("is-opened"),t&&!c&&(i=!0))}t.length>0&&t.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const r=document.querySelector(e.getAttribute("href"));r&&a(r)})}),r.length>0&&r.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),u(e.closest(".popup"))})}),e.length>0&&(e.forEach(e=>{e.addEventListener("transitionend",e=>{"transform"===e.propertyName&&(l=!1,i&&(o.style.paddingRight="0px",o.classList.remove("lock"),n.length>0&&n.forEach(e=>{e.style.paddingRight="0px"}),i=!1))}),e.addEventListener("click",e=>{e.target.closest(".popup__body")||u(e.target.closest(".popup.is-opened"))})}),document.addEventListener("keydown",e=>{if(27===e.which){const e=document.querySelector(".popup.is-opened");e&&u(e)}}))},formValidation=()=>{document.querySelectorAll(".form").forEach(e=>{const t=new Pristine(e);e.addEventListener("submit",(function(r){r.preventDefault();t.validate()?e.submit():setTimeout(()=>{t.reset()},5e3)}))})},inputMasking=()=>{document.querySelectorAll(".js-mask-phone").forEach(e=>{e.addEventListener("input",e=>{VMasker(e.target).maskPattern("(999) 999-99-99")})})},inputsFilter=()=>{document.querySelectorAll(".js-only-digits").forEach(e=>{e.addEventListener("input",e=>{e.target.value=e.target.value.replace(/\D/g,"")})})},preloader=()=>{const e=document.querySelector(".preloader__body"),t=document.querySelector(".preloader"),r=document.querySelector("body");t&&(r.classList.add("lock"),new Promise(e=>{setTimeout(e,800)}).then(()=>{e.style.display="none",t.classList.add("is-loaded"),r.classList.remove("lock")}))},htmlMover=()=>{const e=document.querySelectorAll("[data-html-mover]"),t=[],r=[];function n(e){return Array.prototype.slice.call(e.parentNode.children).indexOf(e)}function o(e,t){t.before(e)}function s(e,t,r){const n=function(e,t){const r=e.children;return r.length>0?r[t]:null}(t,r);n?o(e,n):function(e,t){t.append(e)}(e,t)}function c(){t.forEach((e,t)=>{const n="html-mover-"+e.breakpoint;if(r[t].matches)if(e.originalParent!==e.newParent){if(!e.movingElement.classList.contains(n)&&e.originalParent!==e.newParent){switch(e.newPlace){case"first":s(e.movingElement,e.newParent,0);break;case"last":s(e.movingElement,e.newParent);break;default:if(parseInt(e.newPlace)>=0)s(e.movingElement,e.newParent,parseInt(e.newPlace));else{const t=(c=e.newParent,l=e.newPlace,c.querySelector("."+l));t&&o(e.movingElement,t)}}e.movingElement.classList.add(n)}}else console.warn("HTML-mover: элемент",e.movingElement,"имеет неверный селектор!");else e.movingElement.classList.contains(n)&&(s(e.movingElement,e.originalParent,e.originalPlace),e.movingElement.classList.remove(n));var c,l})}e.length>0&&(e.forEach((e,r)=>{const o=e.getAttribute("data-html-mover").split(",");t[r]={movingElement:e,originalParent:e.parentNode,originalPlace:n(e),newParent:document.querySelector("."+o[0])||e.parentNode,newPlace:o[1].trim()||"last",breakpoint:parseInt(o[2].trim())||767}}),t.sort((e,t)=>e.breakpoint>t.breakpoint?-1:1),t.length>0&&t.forEach(e=>{r.push(window.matchMedia(`(max-width: ${e.breakpoint}px`))}),c(),window.addEventListener("resize",function(e,t){let r;return function(){const n=this,o=arguments;clearTimeout(r),r=setTimeout(()=>e.apply(n,o),t)}}(c,50)))},rating=()=>{const e=document.querySelector(".rating");if(e){const t=e.querySelectorAll(".rating__item");e.onclick=function(e){e.target.classList.contains("is-active")||(t.forEach((function(e){e.classList.remove("is-active")})),e.target.classList.add("is-active"))}}},quantitySelector=()=>{const e=document.querySelectorAll(".js-quantity-selector");e.length>0&&e.forEach(e=>{e.addEventListener("click",t=>{if(t.target.classList.contains("quantity-selector__minus")){if(1===(r=+e.querySelector(".quantity-selector__value").textContent.replace("шт","")))return;n=r-1,e.querySelector(".quantity-selector__value").textContent=n+" шт"}var r,n;t.target.classList.contains("quantity-selector__plus")&&(n=(r=+e.querySelector(".quantity-selector__value").textContent.replace("шт",""))+1,e.querySelector(".quantity-selector__value").textContent=n+" шт")})})},burgerCategories=()=>{document.querySelector(".js-burger-menu").addEventListener("click",e=>{e.target.closest(".categories-burger-menu__header")&&e.target.closest(".categories-burger-menu").classList.toggle("is-opened")})},sortingSelect=()=>{const e=document.querySelectorAll(".js-sorting-select");e.length>0&&e.forEach(e=>{e.addEventListener("click",e=>{e.target.classList.contains("sorting__item")&&(e.target.closest(".sorting__list").querySelector(".is-active").classList.remove("is-active"),e.target.classList.add("is-active"))})})},categories=()=>{const e=document.querySelector(".menu-bot-header__list"),t=document.querySelector(".menu-bot-header__content"),r=t.querySelectorAll(".catalog-nav"),n=e.querySelectorAll(".menu-bot-header__link");e.addEventListener("click",e=>{if(e.target.classList.contains("menu-bot-header__link")){e.preventDefault();const o=e.target.getAttribute("href"),s=t.querySelector(""+o);s.classList.contains("is-shown")?(e.target.classList.remove("is-active"),s.classList.remove("is-shown")):(n.forEach(e=>{e.classList.remove("is-active")}),r.forEach(e=>{e.classList.remove("is-shown")}),setTimeout(()=>{e.target.classList.add("is-active"),s.classList.add("is-shown")},100))}}),document.querySelector("body").addEventListener("click",e=>{const t=document.querySelector(".catalog-nav.is-shown"),r=document.querySelector(".menu-bot-header__link.is-active");t&&(e.target.closest(".catalog-nav")||e.target.classList.contains("menu-bot-header__link")||(t.classList.remove("is-shown"),r.classList.remove("is-active")))})},selectors=()=>{document.querySelectorAll(".selector").forEach(e=>{const t=e.querySelector(".selector__current"),r=e.querySelector(".selector__options"),n=e.querySelector(".selector__input"),o=e.querySelectorAll(".selector__option");t.addEventListener("click",()=>{r.closest(".selector").classList.toggle("is-shown")}),o.forEach(r=>{r.addEventListener("click",()=>{const o=r.getAttribute("data-value"),c=r.textContent;n.value=o,t.textContent=c,s(),e.nextElementSibling.querySelector("button")&&e.nextElementSibling.querySelector("button").disabled&&(e.nextElementSibling.querySelector("button").disabled=!1)})});const s=()=>{r.closest(".selector").classList.remove("is-shown")};document.addEventListener("mouseup",t=>{e.contains(t.target)||s()})})},threeDotsMenu=()=>{const e=document.querySelector(".three-dots__btn"),t=document.querySelector(".js-three-dots-body");t&&e.addEventListener("click",()=>{t.classList.toggle("is-shown")}),document.querySelector("body").addEventListener("click",e=>{e.target.closest(".three-dots__body")||e.target.closest(".three-dots__btn")||t.classList.remove("is-shown")})},catalogueMenu=()=>{document.querySelector(".js-catalogue-btn").addEventListener("click",e=>{e.preventDefault(),document.querySelector(".catalogue__body").classList.toggle("is-opened")})},cartToggle=()=>{document.querySelector(".js-cart-btn").addEventListener("click",()=>{document.querySelector(".cart").classList.toggle("is-opened")}),document.querySelector("body").addEventListener("click",e=>{e.target.closest(".js-cart-btn")||e.target.closest(".cart")||document.querySelector(".cart").classList.remove("is-opened")})},searchInput=()=>{const e=document.querySelector(".searchbar__input");e&&(e.addEventListener("keyup",e=>{e.target.value.length>2?document.querySelector(".search-tip").classList.add("is-shown"):document.querySelector(".search-tip").classList.remove("is-shown")}),e.addEventListener("blur",e=>{e.target.value.length>2&&document.querySelector(".search-tip").classList.remove("is-shown")}),e.addEventListener("focus",e=>{e.target.value.length>2&&document.querySelector(".search-tip").classList.add("is-shown")}))},sliders=()=>{new Swiper(".banner-slider__container",{pagination:{el:".banner-slider__pagination"},spaceBetween:100,slidesPerView:1}),new Swiper(".footer-slider__container",{spaceBetween:5,slidesPerView:1,loop:!0,navigation:{nextEl:".footer-slider__button--next",prevEl:".footer-slider__button--prev"},breakpoints:{850:{slidesPerView:4},900:{slidesPerView:7}}})};document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".ibg").forEach(e=>{e.querySelector("img")&&(e.style.backgroundImage="url("+e.querySelector("img").getAttribute("src")+")",e.querySelector("img").style.display="none")}),burgerMenu("burger-menu"),popups(),document.querySelectorAll(".form").forEach(e=>{const t=new Pristine(e);e.addEventListener("submit",(function(r){r.preventDefault(),t.validate()?e.submit():setTimeout(()=>{t.reset()},5e3)}))}),document.querySelectorAll(".js-mask-phone").forEach(e=>{e.addEventListener("input",e=>{VMasker(e.target).maskPattern("(999) 999-99-99")})}),document.querySelectorAll(".js-only-digits").forEach(e=>{e.addEventListener("input",e=>{e.target.value=e.target.value.replace(/\D/g,"")})}),preloader(),document.querySelectorAll(".selector").forEach(e=>{const t=e.querySelector(".selector__current"),r=e.querySelector(".selector__options"),n=e.querySelector(".selector__input"),o=e.querySelectorAll(".selector__option");t.addEventListener("click",()=>{r.closest(".selector").classList.toggle("is-shown")}),o.forEach(r=>{r.addEventListener("click",()=>{const o=r.getAttribute("data-value"),c=r.textContent;n.value=o,t.textContent=c,s(),e.nextElementSibling.querySelector("button")&&e.nextElementSibling.querySelector("button").disabled&&(e.nextElementSibling.querySelector("button").disabled=!1)})});const s=()=>{r.closest(".selector").classList.remove("is-shown")};document.addEventListener("mouseup",t=>{e.contains(t.target)||s()})}),threeDotsMenu(),document.querySelector(".js-catalogue-btn").addEventListener("click",e=>{e.preventDefault(),document.querySelector(".catalogue__body").classList.toggle("is-opened")}),new Swiper(".banner-slider__container",{pagination:{el:".banner-slider__pagination"},spaceBetween:100,slidesPerView:1}),new Swiper(".footer-slider__container",{spaceBetween:5,slidesPerView:1,loop:!0,navigation:{nextEl:".footer-slider__button--next",prevEl:".footer-slider__button--prev"},breakpoints:{850:{slidesPerView:4},900:{slidesPerView:7}}}),document.querySelector(".js-cart-btn").addEventListener("click",()=>{document.querySelector(".cart").classList.toggle("is-opened")}),document.querySelector("body").addEventListener("click",e=>{e.target.closest(".js-cart-btn")||e.target.closest(".cart")||document.querySelector(".cart").classList.remove("is-opened")}),searchInput(),categories(),sortingSelect(),document.querySelector(".js-burger-menu").addEventListener("click",e=>{e.target.closest(".categories-burger-menu__header")&&e.target.closest(".categories-burger-menu").classList.toggle("is-opened")}),quantitySelector(),rating(),htmlMover()});