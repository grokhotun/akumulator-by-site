"use strict";window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)});var yandexMaps=function(){ymaps.ready((function(){new ymaps.Map("ya-map-contacts",{center:[53.842377,27.559467],zoom:16}),new ymaps.Map("ya-map-contacts-full",{center:[53.842377,27.559467],zoom:16})}))},imgToBackground=function(){document.querySelectorAll(".ibg").forEach((function(e){e.querySelector("img")&&(e.style.backgroundImage="url("+e.querySelector("img").getAttribute("src")+")",e.querySelector("img").style.display="none")}))},burgerMenu=function(e){var t=document.querySelector(".burger"),n=document.querySelector(".".concat(e));n&&t.addEventListener("click",(function(){t.classList.toggle("is-active"),n.classList.toggle("is-shown"),document.querySelector("body").classList.toggle("lock")}))},popups=function(){var e=document.querySelectorAll(".popup"),t=document.querySelectorAll(".js-popup-open"),n=document.querySelectorAll(".js-popup-close"),o=document.querySelectorAll(".lock-padding"),r=document.querySelector("body"),c=null,i=null,s=!1,a=!1;function l(e){if(!s){s=!0;var t=document.querySelector(".popup.is-opened");t&&u(t,!1),e.scrollTo(0,0),e.classList.add("is-opened"),c=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px",o.length>0&&o.forEach((function(e){e.style.paddingRight=c})),r.style.paddingRight=c,r.classList.add("lock")}}function u(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];s||(s=!0,i=document.querySelector(".burger.is-active"),e.classList.remove("is-opened"),t&&!i&&(a=!0))}t.length>0&&t.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var n=document.querySelector(e.getAttribute("href"));n&&l(n)}))})),n.length>0&&n.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault(),u(e.closest(".popup"))}))})),e.length>0&&(e.forEach((function(e){e.addEventListener("transitionend",(function(e){"transform"===e.propertyName&&(s=!1,a&&(r.style.paddingRight="0px",r.classList.remove("lock"),o.length>0&&o.forEach((function(e){e.style.paddingRight="0px"})),a=!1))})),e.addEventListener("click",(function(e){e.target.closest(".popup__body")||u(e.target.closest(".popup.is-opened"))}))})),document.addEventListener("keydown",(function(e){if(27===e.which){var t=document.querySelector(".popup.is-opened");t&&u(t)}})))},formValidation=function(){document.querySelectorAll(".form").forEach((function(e){var t=new Pristine(e);e.addEventListener("submit",(function(n){n.preventDefault(),t.validate()?e.submit():setTimeout((function(){t.reset()}),5e3)}))}))},inputMasking=function(){document.querySelectorAll(".js-mask-phone").forEach((function(e){e.addEventListener("input",(function(e){VMasker(e.target).maskPattern("(999) 999-99-99")}))}))},inputsFilter=function(){document.querySelectorAll(".js-only-digits").forEach((function(e){e.addEventListener("input",(function(e){e.target.value=e.target.value.replace(/\D/g,"")}))}))},preloader=function(){var e=document.querySelector(".preloader__body"),t=document.querySelector(".preloader"),n=document.querySelector("body");t&&(n.classList.add("lock"),new Promise((function(e){setTimeout(e,800)})).then((function(){e.style.display="none",t.classList.add("is-loaded"),n.classList.remove("lock")})))},htmlMover=function(){var e,t,n,o=document.querySelectorAll("[data-html-mover]"),r=[],c=[];function i(e){return Array.prototype.slice.call(e.parentNode.children).indexOf(e)}function s(e,t){t.before(e)}function a(e,t,n){var o=function(e,t){var n=e.children;return n.length>0?n[t]:null}(t,n);o?s(e,o):function(e,t){t.append(e)}(e,t)}function l(){r.forEach((function(e,t){var n,o,r="html-mover-".concat(e.breakpoint);if(c[t].matches)if(e.originalParent!==e.newParent){if(!e.movingElement.classList.contains(r)&&e.originalParent!==e.newParent){switch(e.newPlace){case"first":a(e.movingElement,e.newParent,0);break;case"last":a(e.movingElement,e.newParent);break;default:if(parseInt(e.newPlace)>=0)a(e.movingElement,e.newParent,parseInt(e.newPlace));else{var i=(n=e.newParent,o=e.newPlace,n.querySelector(".".concat(o)));i&&s(e.movingElement,i)}}e.movingElement.classList.add(r)}}else console.warn("HTML-mover: элемент",e.movingElement,"имеет неверный селектор!");else e.movingElement.classList.contains(r)&&(a(e.movingElement,e.originalParent,e.originalPlace),e.movingElement.classList.remove(r))}))}o.length>0&&(o.forEach((function(e,t){var n=e.getAttribute("data-html-mover").split(",");r[t]={movingElement:e,originalParent:e.parentNode,originalPlace:i(e),newParent:document.querySelector(".".concat(n[0]))||e.parentNode,newPlace:n[1].trim()||"last",breakpoint:parseInt(n[2].trim())||767}})),r.sort((function(e,t){return e.breakpoint>t.breakpoint?-1:1})),r.length>0&&r.forEach((function(e){c.push(window.matchMedia("(max-width: ".concat(e.breakpoint,"px")))})),l(),window.addEventListener("resize",(e=l,t=50,function(){var o=this,r=arguments;clearTimeout(n),n=setTimeout((function(){return e.apply(o,r)}),t)})))},rating=function(){var e=document.querySelector(".rating");if(e){var t=e.querySelectorAll(".rating__item");e.onclick=function(e){e.target.classList.contains("is-active")||(t.forEach((function(e){e.classList.remove("is-active")})),e.target.classList.add("is-active"))}}},quantitySelector=function(){var e=document.querySelectorAll(".js-quantity-selector");e.length>0&&e.forEach((function(e){e.addEventListener("click",(function(t){if(t.target.classList.contains("quantity-selector__minus")){if(1===(n=+e.querySelector(".quantity-selector__value").textContent.replace("шт","")))return;o=n-1,e.querySelector(".quantity-selector__value").textContent="".concat(o," шт")}var n,o;t.target.classList.contains("quantity-selector__plus")&&(o=(n=+e.querySelector(".quantity-selector__value").textContent.replace("шт",""))+1,e.querySelector(".quantity-selector__value").textContent="".concat(o," шт"))}))}))},burgerCategories=function(){document.querySelector(".js-burger-menu").addEventListener("click",(function(e){e.target.closest(".categories-burger-menu__header")&&e.target.closest(".categories-burger-menu").classList.toggle("is-opened")}))},sortingSelect=function(){var e=document.querySelectorAll(".js-sorting-select");e.length>0&&e.forEach((function(e){e.addEventListener("click",(function(e){e.target.classList.contains("sorting__item")&&(e.target.closest(".sorting__list").querySelector(".is-active").classList.remove("is-active"),e.target.classList.add("is-active"))}))}))},categories=function(){var e=document.querySelector(".menu-bot-header__list"),t=document.querySelector(".menu-bot-header__content"),n=t.querySelectorAll(".catalog-nav"),o=e.querySelectorAll(".menu-bot-header__link");e.addEventListener("click",(function(e){if(e.target.classList.contains("menu-bot-header__link")){e.preventDefault();var r=e.target.getAttribute("href"),c=t.querySelector("".concat(r));c.classList.contains("is-shown")?(e.target.classList.remove("is-active"),c.classList.remove("is-shown")):(o.forEach((function(e){e.classList.remove("is-active")})),n.forEach((function(e){e.classList.remove("is-shown")})),setTimeout((function(){e.target.classList.add("is-active"),c.classList.add("is-shown")}),100))}})),document.querySelector("body").addEventListener("click",(function(e){var t=document.querySelector(".catalog-nav.is-shown"),n=document.querySelector(".menu-bot-header__link.is-active");t&&(e.target.closest(".catalog-nav")||e.target.classList.contains("menu-bot-header__link")||(t.classList.remove("is-shown"),n.classList.remove("is-active")))}))},selectors=function(){document.querySelectorAll(".selector").forEach((function(e){var t=e.querySelector(".selector__current"),n=e.querySelector(".selector__options"),o=e.querySelector(".selector__input"),r=e.querySelectorAll(".selector__option");t.addEventListener("click",(function(){n.closest(".selector").classList.toggle("is-shown")})),r.forEach((function(n){n.addEventListener("click",(function(){var r=n.getAttribute("data-value"),i=n.textContent;o.value=r,t.textContent=i,c(),e.nextElementSibling.querySelector("button")&&e.nextElementSibling.querySelector("button").disabled&&(e.nextElementSibling.querySelector("button").disabled=!1)}))}));var c=function(){n.closest(".selector").classList.remove("is-shown")};document.addEventListener("mouseup",(function(t){e.contains(t.target)||c()}))}))},threeDotsMenu=function(){var e=document.querySelector(".three-dots__btn"),t=document.querySelector(".js-three-dots-body");t&&e.addEventListener("click",(function(){t.classList.toggle("is-shown")})),document.querySelector("body").addEventListener("click",(function(e){e.target.closest(".three-dots__body")||e.target.closest(".three-dots__btn")||t.classList.remove("is-shown")}))},catalogueMenu=function(){document.querySelector(".js-catalogue-btn").addEventListener("click",(function(e){e.preventDefault(),document.querySelector(".catalogue__body").classList.toggle("is-opened")}))},cartToggle=function(){document.querySelector(".js-cart-btn").addEventListener("click",(function(){document.querySelector(".cart").classList.toggle("is-opened")})),document.querySelector("body").addEventListener("click",(function(e){e.target.closest(".js-cart-btn")||e.target.closest(".cart")||document.querySelector(".cart").classList.remove("is-opened")}))},searchInput=function(){var e=document.querySelector(".searchbar__input");e&&(e.addEventListener("keyup",(function(e){e.target.value.length>2?document.querySelector(".search-tip").classList.add("is-shown"):document.querySelector(".search-tip").classList.remove("is-shown")})),e.addEventListener("blur",(function(e){e.target.value.length>2&&document.querySelector(".search-tip").classList.remove("is-shown")})),e.addEventListener("focus",(function(e){e.target.value.length>2&&document.querySelector(".search-tip").classList.add("is-shown")})))},sliders=function(){new Swiper(".banner-slider__container",{pagination:{el:".banner-slider__pagination"},spaceBetween:100,slidesPerView:1}),new Swiper(".footer-slider__container",{spaceBetween:5,slidesPerView:1,loop:!0,navigation:{nextEl:".footer-slider__button--next",prevEl:".footer-slider__button--prev"},breakpoints:{850:{slidesPerView:4},900:{slidesPerView:7}}})};document.addEventListener("DOMContentLoaded",(function(){imgToBackground(),burgerMenu("burger-menu"),popups(),formValidation(),inputMasking(),inputsFilter(),preloader(),selectors(),threeDotsMenu(),catalogueMenu(),sliders(),cartToggle(),searchInput(),categories(),sortingSelect(),burgerCategories(),quantitySelector(),rating(),htmlMover(),yandexMaps(),svg4everybody()}));